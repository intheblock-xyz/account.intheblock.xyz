(function(t){function e(e){for(var a,i,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==n[l]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},n={app:0},o=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},1:function(t,e){},2:function(t,e){},"21ca":function(t,e,s){},3:function(t,e){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),n=s("289d"),o=s("2347"),i=s.n(o),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("b-navbar",{staticClass:"is-primary",attrs:{"mobile-burger":!0},scopedSlots:t._u([{key:"brand",fn:function(){return[e("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Home"}}},[e("img",{attrs:{src:s("735d"),alt:"Cardano Aim logo"}})])]},proxy:!0},{key:"end",fn:function(){return[e("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Home"},active:"Home"===t.currentRoute.name}},[t._v(" "+t._s(t.$t("general.MI_DISPERSAL"))+" ")]),Object.keys(t.langs).length>1?e("b-navbar-dropdown",{attrs:{label:t.langs[t.$i18n.locale]}},t._l(t.langs,(function(s,a){return e("b-navbar-item",{key:"lang-"+a,on:{click:function(e){return t.changeLocale(a)}}},[t._v(" "+t._s(s)+" ")])})),1):t._e(),e("b-navbar-item",{attrs:{tag:"div"}},[t.isPaidAccount?e("b-tag",{attrs:{size:"is-medium",type:"is-success"}},[t._v(" Paid Account ")]):e("b-tag",{attrs:{size:"is-medium",type:"is-warning"}},[t._v(" Free Account ")])],1),e("b-navbar-item",{attrs:{tag:"div"}},[e("div",{staticClass:"buttons"},[t.isPaidAccount?e("a",{staticClass:"button is-light",on:{click:t.signOut}},[t._v(" Sign out ")]):e("a",{staticClass:"button is-light",on:{click:t.signIn}},[t._v(" Sign in ")])])])]},proxy:!0}])}),e("div",{staticClass:"section container"},[e("div",{staticClass:"content-wrapper"},[e("router-view")],1)])],1)},l=[],c=s("2f62"),u={en:"English",ja:"日本語",es:"Español",fr:"Français",pt:"Português",ru:"русский",zh:"中国人"},d={data(){return{challenges:[],langs:u}},computed:{...Object(c["b"])("user",["isPaidAccount","savedTransfersPaid"]),currentRoute(){return this.$router.currentRoute}},methods:{changeLocale(t){this.$store.commit("user/setLocale",t),this.$i18n.locale=t,this.$router.go()},signIn(){this.$store.commit("user/setPaidAccount")},signOut(){let t=null;try{const e=JSON.parse(this.savedTransfersPaid);t=e.transfers}catch{}if(t){const e=new Set(t.map(({tokenCode:t})=>t)),s=0===e.size||1===e.size&&e.has("ada");s?this.$store.commit("user/setFreeAccount"):this.$buefy.dialog.confirm({title:"Signing out",message:"You are leaving a paid account. Transfers will be resetted.",cancelText:"Cancel",confirmText:"Continue",onConfirm:()=>this.$store.commit("user/setFreeAccount")})}else this.$store.commit("user/setFreeAccount")}},created(){this.$i18n.locale=this.$store.state.user.locale}},m=d,h=(s("8a6f"),s("2877")),f=Object(h["a"])(m,r,l,!1,null,null,null),p=f.exports,b=s("8c4f"),A=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-12"},[e("h2",{staticClass:"title is-2"},[t._v(t._s(t.$t("home.TOOL_TITLE")))])]),e("div",{staticClass:"column is-12"},[e("project")],1)])])},v=[],k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-6"},[e("div",{staticClass:"buttons"},[e("b-button",{on:{click:t.newProject}},[t._v("New project")]),e("b-button",{attrs:{"icon-left":"cog"},on:{click:t.showPreferencesModal}}),e("b-modal",{attrs:{"has-modal-card":"","trap-focus":"","destroy-on-hide":"","aria-role":"dialog","aria-label":"Project preferences modal","close-button-aria-label":"Close","aria-modal":""},scopedSlots:t._u([{key:"default",fn:function(s){return[e("preferences-modal",{attrs:{isPaidAccount:t.isPaidAccount,presistedTokensCodes:t.transfersTokensCodesSet,initials:{projectName:t.projectName,labelTitles:t.labelTitles,enabledTokensCodes:t.enabledTokensCodes}},on:{close:s.close,submit:t.submitPreferencesForm}})]}}]),model:{value:t.isPreferencesModalActive,callback:function(e){t.isPreferencesModalActive=e},expression:"isPreferencesModalActive"}})],1)]),e("div",{staticClass:"column is-6"},[e("div",{staticClass:"buttons is-right"},[e("download-csv",{attrs:{data:t.toExport,name:t.projectName+".csv"}},[e("b-button",{attrs:{disabled:!t.transfers.length}},[t._v("Export to .csv")])],1),e("input",{ref:"fileInput",attrs:{type:"file",accept:".csv"},on:{change:t.loadFromFile}}),e("b-button",{on:{click:function(e){return t.$refs.fileInput.click()}}},[t._v("Import from .csv")])],1)]),t.isProjectLoaded?e("div",{staticClass:"column is-12"},[e("h3",{staticClass:"title is-3"},[t.isProjectNameEditing?e("span",[e("b-field",[e("b-input",{ref:"projectNameInput",attrs:{size:"is-large"},nativeOn:{keypress:function(e){return t.projectNameEnterButtonHandler.apply(null,arguments)}},model:{value:t.projectName,callback:function(e){t.projectName=e},expression:"projectName"}}),e("p",{staticClass:"control"},[e("b-button",{attrs:{"icon-left":"check",size:"is-large"},on:{click:t.disableProjectNameEditing}})],1)],1)],1):e("span",{staticClass:"projectName",on:{click:t.enableProjectNameEditing}},[t._v(" "+t._s(t.projectName||"[unnamed project]")+" ")])])]):t._e(),t._l(t.tokensOverview,(function(s){return e("div",{key:s.code,staticClass:"column is-3"},[t.isProjectLoaded?e("ul",[e("li",[e("b",[t._v(t._s(s.code.toUpperCase())+" available:")]),t._v(" "+t._s(t.$n(s.available))+" ")]),e("li",[e("b",[t._v(t._s(s.code.toUpperCase())+" received:")]),t._v(" "+t._s(t.$n(s.received))+" ")]),e("li",[e("b",[t._v(t._s(s.code.toUpperCase())+" sent:")]),t._v(" "+t._s(t.$n(s.sent))+" ")]),e("li",[e("b",[t._v("Current "+t._s(s.code.toUpperCase())+"/USD rate:")]),t._v(" "+t._s(t.currentRates[s.code]?t.$n(t.currentRates[s.code]):"?")+" ")])]):t._e()])})),t.isProjectLoaded?e("div",{staticClass:"column is-12"},[e("ul",[e("li",[e("b",[t._v("USD available:")]),t._v(" "+t._s(t.$n(t.usdAvailable,"currency"))+" ")]),e("li",[e("b",[t._v("USD received:")]),t._v(" "+t._s(t.$n(t.usdReceived,"currency"))+" ")]),e("li",[e("b",[t._v("USD sent:")]),t._v(" "+t._s(t.$n(t.usdSent,"currency"))+" ")])])]):t._e(),t.isProjectLoaded&&Object.keys(t.geckoApiTokensIds).length?e("div",{staticClass:"column is-12"},[e("div",{staticClass:"buttons"},[e("b-button",{attrs:{size:"is-small","icon-left":"refresh",loading:null===t.currentRates.ada},on:{click:t.loadCurrentRate}},[t._v("Refresh rates")])],1)]):t._e(),t.isProjectLoaded?e("div",{staticClass:"column is-12"},[e("hr")]):t._e(),t.isProjectLoaded?e("div",{staticClass:"column is-12"},[t.isFormVisible?e("div",{staticClass:"box columns is-multiline"},[e("b-field",{staticClass:"column is-3",attrs:{label:"Date"}},[e("b-datepicker",{attrs:{editable:"",locale:"en-CA",icon:"calendar-today",placeholder:"Type or select a date..."},model:{value:t.formData.date,callback:function(e){t.$set(t.formData,"date",e)},expression:"formData.date"}})],1),e("b-field",{staticClass:"column is-3",attrs:{label:(t.isMultipleTokensEnabled?"":"₳ ")+"Amount"}},[e("b-input",{attrs:{type:"number",step:"0.01",required:""},nativeOn:{keyup:function(e){return t.adjustTransferAmountFromAda.apply(null,arguments)}},model:{value:t.formData.amount,callback:function(e){t.$set(t.formData,"amount",e)},expression:"formData.amount"}}),this.isFormUpdate?t._e():e("p",{staticClass:"control"},[e("b-dropdown",{attrs:{"aria-role":"list",position:"is-bottom-left"},scopedSlots:t._u([{key:"trigger",fn:function({active:s}){return[e("b-button",{attrs:{label:t.formData.tokenCode.toUpperCase(),"icon-right":s?"menu-up":"menu-down"}})]}}],null,!1,3144116535),model:{value:t.formData.tokenCode,callback:function(e){t.$set(t.formData,"tokenCode",e)},expression:"formData.tokenCode"}},t._l(t.enabledTokensCodes,(function(s){return e("b-dropdown-item",{key:s,attrs:{"aria-role":"listitem",value:s}},[t._v(t._s(s.toUpperCase()))])})),1)],1),this.isFormUpdate?e("p",{staticClass:"control"},[e("b-button",{attrs:{disabled:"",label:t.formData.tokenCode.toUpperCase()}})],1):t._e()],1),e("b-field",{staticClass:"column is-3",attrs:{label:"$ Amount"}},[e("b-input",{attrs:{type:"number",step:"0.01",required:""},nativeOn:{keyup:function(e){return t.adjustTransferAmountFromUSD.apply(null,arguments)}},model:{value:t.formData.amountUSD,callback:function(e){t.$set(t.formData,"amountUSD",e)},expression:"formData.amountUSD"}})],1),e("b-field",{staticClass:"column is-3",attrs:{label:t.isMultipleTokensEnabled?"Rate":"ADA/USD rate"}},[e("b-input",{attrs:{type:"number",step:"0.000000000000001",required:""},nativeOn:{keyup:function(e){return t.adjustTransferAmountsFromRate.apply(null,arguments)},keypress:function(e){return t.enterButtonHandler.apply(null,arguments)}},model:{value:t.formData.rate,callback:function(e){t.$set(t.formData,"rate",e)},expression:"formData.rate"}}),t.isFormUpdate?t._e():e("p",{staticClass:"control"},[e("b-button",{attrs:{"icon-left":"alarm-panel"},on:{click:t.showRateModal}})],1),t.isFormUpdate?t._e():e("b-modal",{attrs:{"full-screen":"","has-modal-card":"","trap-focus":"","destroy-on-hide":"","aria-role":"dialog","aria-label":"Rate calculation modal","close-button-aria-label":"Close","aria-modal":""},scopedSlots:t._u([{key:"default",fn:function(s){return[e("rate-modal",{attrs:{initialTransfers:t.transfers,currentRate:t.formData.rate,currentTokenCode:t.formData.tokenCode,initialAdaAmount:t.formData.amount,initialUsdAmount:t.formData.amountUSD,initialLastTouchedAmount:t.lastTouchedAmount},on:{close:s.close,submit:t.submitRateForm}})]}}],null,!1,245103154),model:{value:t.isRateModalActive,callback:function(e){t.isRateModalActive=e},expression:"isRateModalActive"}})],1),t._l(t.labelTitles,(function(s){return e("b-field",{key:s,staticClass:"column is-3",attrs:{label:s}},[e("b-input",{nativeOn:{keypress:function(e){return t.enterButtonHandler.apply(null,arguments)}},model:{value:t.formData.labels[s],callback:function(e){t.$set(t.formData.labels,s,e)},expression:"formData.labels[label]"}})],1)})),e("div",{staticClass:"buttons column is-12"},[t.isFormUpdate?e("b-button",{attrs:{type:"is-primary","icon-left":"check"},on:{click:t.submitUpdate}},[t._v("Save")]):t._e(),t.isFormUpdate?t._e():e("b-button",{attrs:{type:"is-primary","icon-left":"arrow-up"},on:{click:t.submitAddSent}},[t._v("Pay")]),t.isFormUpdate?t._e():e("b-button",{attrs:{type:"is-primary","icon-left":"arrow-down"},on:{click:t.submitAddReceive}},[t._v("Receive")]),e("b-button",{on:{click:t.hideForm}},[t._v("Cancel")])],1)],2):e("div",{staticClass:"buttons"},[e("b-button",{attrs:{type:"is-primary","icon-left":"plus-thick"},on:{click:t.showForm}},[t._v("Add transfer")]),e("b-button",{attrs:{type:"is-primary","icon-left":"cash-multiple"},on:{click:t.makePayment}},[t._v("Make payment")])],1)]):t._e(),t.isProjectLoaded?e("div",{staticClass:"column is-12"},[e("b-table",{attrs:{"default-sort":"date","default-sort-direction":"desc",paginated:"","pagination-size":"is-small","pagination-simple":"","per-page":"10",data:t.transfers},scopedSlots:t._u([{key:"empty",fn:function(){return[e("div",{staticClass:"has-text-centered"},[t._v("No transfers")])]},proxy:!0},{key:"bottom-left",fn:function(){return[e("b",[t._v("Total transfers")]),t._v(": "+t._s(t.transfers.length)+" ")]},proxy:!0}],null,!1,3575778765)},[e("b-table-column",{attrs:{field:"date",label:"Date",width:"205",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.$d(e.row.date,"short"))+" ")]}}],null,!1,1013513750)}),e("b-table-column",{attrs:{"custom-key":"in",label:""+(t.isMultipleTokensEnabled?"In":"ADA in"),numeric:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.amountIn||"–")+" ")]}}],null,!1,297466853)}),e("b-table-column",{attrs:{"custom-key":"out",label:""+(t.isMultipleTokensEnabled?"Out":"ADA out"),numeric:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.amountOut||"–")+" ")]}}],null,!1,760400172)}),t.isMultipleTokensEnabled?e("b-table-column",{attrs:{field:"tokenCode",label:"Token"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.tokenCode?e.row.tokenCode.toUpperCase():"ADA")+" ")]}}],null,!1,3428790234)}):t._e(),e("b-table-column",{attrs:{"custom-key":"balance",label:"Balance",numeric:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.isMultipleTokensEnabled?t.$n(e.row.balanceUsd,"currency"):e.row.balance||"–")+" ")]}}],null,!1,2042073482)}),e("b-table-column",{attrs:{"custom-key":"exchange",label:"Exchange",numeric:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.$n((e.row.amountIn||e.row.amountOut)*e.row.rate,"currency"))+" ")]}}],null,!1,2701030621)}),e("b-table-column",{attrs:{field:"rate",label:t.isMultipleTokensEnabled?"Rate":"ADA/USD rate",numeric:"",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.$n(e.row.rate))+" ")]}}],null,!1,1418564404)}),t._l(t.labelTitles,(function(s){return e("b-table-column",{key:s,attrs:{label:s,"custom-key":"label",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.getLabelValue(s,e.row.labels)||"–")+" ")]}}],null,!0)})})),e("b-table-column",{attrs:{"custom-key":"actions",width:"70"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"actionButtons"},[e("b-button",{attrs:{size:"is-small","icon-left":"pencil-outline"},on:{click:function(e){return t.transferToForm(s.row)}}}),e("b-button",{attrs:{size:"is-small",type:"is-danger is-light","icon-left":"delete-outline"},on:{click:function(e){return t.transferRemove(s.row)}}})],1)]}}],null,!1,3632606584)})],2)],1):t._e()],2)},T=[],g=(s("13d5"),s("369b")),C=s.n(g),y=s("2edf"),F=s.n(y),S=s("bc3a"),w=s.n(S),P={project(){return w.a.get("//data/project.json")}},j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v("Project preferences")]),e("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}})]),e("section",{staticClass:"modal-card-body"},[e("b-field",{attrs:{label:"Project name"}},[e("b-input",{attrs:{required:""},model:{value:t.projectName,callback:function(e){t.projectName=e},expression:"projectName"}})],1),t.isPaidAccount?e("h5",{staticClass:"title is-5"},[t._v("Tokens")]):t._e(),t.isPaidAccount?e("b-field",[e("b-dropdown",{attrs:{"aria-role":"list",multiple:"",scrollable:"","max-height":170+25*t.labelTitlesOrder.length},scopedSlots:t._u([{key:"trigger",fn:function({active:s}){return[e("b-button",{attrs:{label:t.enabledTokensCodes.length+" selected","icon-right":s?"menu-up":"menu-down"}})]}}],null,!1,1007259041),model:{value:t.enabledTokensCodes,callback:function(e){t.enabledTokensCodes=e},expression:"enabledTokensCodes"}},t._l(t.availableTokensCodes,(function(s){return e("b-dropdown-item",{key:s,attrs:{"aria-role":"listitem",value:s,disabled:1===t.enabledTokensCodes.length&&s===t.enabledTokensCodes[0]||t.presistedTokensCodes.has(s)}},[t._v(t._s(s.toUpperCase()))])})),1)],1):t._e(),t.isPaidAccount?e("b-field",[e("b-input",{attrs:{placeholder:"Add your token..."},model:{value:t.newTokenCode,callback:function(e){t.newTokenCode=e},expression:"newTokenCode"}}),e("p",{staticClass:"buttons"},[e("b-button",{attrs:{"icon-right":"check",disabled:!t.newTokenCode.length},on:{click:t.tokenAdd}})],1)],1):t._e(),e("h5",{staticClass:"title is-5"},[t._v("Labels set")]),t._l(t.labelTitlesOrder,(function(s){return e("div",{key:s},[e("b-field",[e("b-input",{attrs:{required:""},model:{value:t.labelTitles[s],callback:function(e){t.$set(t.labelTitles,s,e)},expression:"labelTitles[labelTitle]"}}),e("p",{staticClass:"control"},[e("b-button",{attrs:{type:"is-danger is-light","icon-left":"delete-outline"},on:{click:function(e){return t.labelRemove(s)}}})],1)],1)],1)})),e("b-button",{attrs:{"icon-left":"plus",label:"Add label"},on:{click:t.labelAdd}})],2),e("footer",{staticClass:"modal-card-foot"},[e("b-button",{attrs:{"icon-left":"check",label:"Apply",type:"is-primary"},on:{click:function(e){return t.$emit("submit",{projectName:t.projectName,labelTitles:t.labelTitles,labelTitlesOrder:t.labelTitlesOrder,enabledTokensCodes:t.enabledTokensCodes})}}}),e("b-button",{attrs:{label:"Cancel"},on:{click:function(e){return t.$emit("close")}}})],1)])},D=[];const R=["ada"];var _={props:["initials","isPaidAccount","presistedTokensCodes"],data(){const t={},e=[];this.initials.labelTitles.forEach(s=>{t[s]=s,e.push(s)});const s=Array.from(new Set([...R,...this.initials.enabledTokensCodes]));return s.sort((t,e)=>t.localeCompare(e)),{projectName:this.initials.projectName,availableTokensCodes:s,enabledTokensCodes:this.initials.enabledTokensCodes,newTokenCode:"",labelTitles:t,labelTitlesOrder:e}},methods:{labelAdd(){const t=Date.now().toString();this.labelTitles[t]="",this.labelTitlesOrder.push(t)},labelRemove(t){delete this.labelTitles[t],this.labelTitlesOrder.splice(this.labelTitlesOrder.indexOf(t),1)},tokenAdd(){const t=this.newTokenCode;if(!this.availableTokensCodes.includes(t)){const e=[...this.availableTokensCodes,t];e.sort((t,e)=>t.localeCompare(e)),this.availableTokensCodes=e,this.enabledTokensCodes.push(t),this.newTokenCode=""}}}},O=_,x=Object(h["a"])(O,j,D,!1,null,null,null),U=x.exports,I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[t._m(0),e("section",{staticClass:"modal-card-body"},[e("h4",{staticClass:"title is-4"},[t._v("Total")]),e("div",{staticClass:"columns"},[e("b-field",{staticClass:"column is-3",attrs:{label:("ada"===t.currentTokenCode?"₳":t.currentTokenCode.toUpperCase())+" Amount"}},[e("b-input",{attrs:{type:"number",step:"0.01"},nativeOn:{keyup:function(e){return t.adjustAmountFromAda.apply(null,arguments)}},model:{value:t.adaAmount,callback:function(e){t.adaAmount=e},expression:"adaAmount"}})],1),e("b-field",{staticClass:"column is-3",attrs:{label:"$ Amount"}},[e("b-input",{attrs:{type:"number",step:"0.01"},nativeOn:{keyup:function(e){return t.adjustAmountFromUSD.apply(null,arguments)}},model:{value:t.usdAmount,callback:function(e){t.usdAmount=e},expression:"usdAmount"}})],1),t.transfers.length?e("b-field",{staticClass:"column is-6",attrs:{label:"Incoming Transfers"}},[e("p",{staticClass:"control"},[e("b-button",{attrs:{"icon-left":"plus"},on:{click:t.addCustomRow}})],1),e("b-dropdown",{attrs:{multiple:"",scrollable:"","aria-role":"list"},scopedSlots:t._u([{key:"trigger",fn:function(){return[e("b-button",{attrs:{expanded:"","icon-right":"menu-down",label:t.transfersSelected.length+" selected"}})]},proxy:!0}],null,!1,2387385766),model:{value:t.transfersSelected,callback:function(e){t.transfersSelected=e},expression:"transfersSelected"}},t._l(t.transfers,(function(s){return e("b-dropdown-item",{key:s.id,attrs:{value:s.id,"aria-role":"listitem"}},[e("span",[t._v(t._s(t.$d(s.date,"short"))+" / "+t._s(""+("ada"===t.currentTokenCode?"₳":t.currentTokenCode.toUpperCase()+" "))+t._s(s.amount)+" / "+t._s(s.rate))])])})),1)],1):t._e()],1),t.columns.length?e("div",[e("h4",{staticClass:"title is-4"},[t._v("Split")]),t._l(t.rows.entries(),(function([s,a]){return e("div",{key:a.id,staticClass:"columns"},[e("b-field",{staticClass:"column is-3"},[e("b-datepicker",{attrs:{editable:"",locale:"en-CA",icon:"calendar-today",placeholder:"Type or select a date..."},model:{value:t.columnDate[s],callback:function(e){t.$set(t.columnDate,s,e)},expression:"columnDate[idx]"}})],1),e("b-field",{staticClass:"column is-2"},[e("p",{staticClass:"control"},[e("b-button",{staticClass:"button is-static",attrs:{label:"~"}})],1),e("b-input",{attrs:{type:"number",step:"0.000000000000001",required:""},on:{focus:function(e){return t.setLastTouchedField(a,"rate")}},model:{value:t.columnRate[s],callback:function(e){t.$set(t.columnRate,s,e)},expression:"columnRate[idx]"}})],1),e("b-field",{staticClass:"column is-2"},[e("p",{staticClass:"control"},[e("b-button",{staticClass:"button is-static",attrs:{label:""+("ada"===t.currentTokenCode?"₳":t.currentTokenCode.toUpperCase())}})],1),e("b-input",{attrs:{type:"number",step:"0.01",required:""},on:{focus:function(e){return t.setLastTouchedField(a,"adaAmount")}},model:{value:t.columnAdaAmount[s],callback:function(e){t.$set(t.columnAdaAmount,s,e)},expression:"columnAdaAmount[idx]"}})],1),e("b-field",{staticClass:"column is-2"},[e("p",{staticClass:"control"},[e("b-button",{staticClass:"button is-static",attrs:{"icon-left":"currency-usd"}})],1),e("b-input",{attrs:{type:"number",step:"0.01",required:""},on:{focus:function(e){return t.setLastTouchedField(a,"usdAmount")}},model:{value:t.columnUsdAmount[s],callback:function(e){t.$set(t.columnUsdAmount,s,e)},expression:"columnUsdAmount[idx]"}})],1),e("b-field",{staticClass:"column is-2",attrs:{type:100===t.columnPercentSum?null:"is-warning"}},[e("b-input",{attrs:{type:"number",step:"1",min:"0",max:"100",required:""},on:{focus:function(e){return t.setLastTouchedField(a,"percent")}},nativeOn:{keyup:function(e){return(()=>t.distributePercentRemainders(!0)).apply(null,arguments)}},model:{value:t.columnPercent[s],callback:function(e){t.$set(t.columnPercent,s,e)},expression:"columnPercent[idx]"}}),e("p",{staticClass:"control"},[e("b-button",{staticClass:"button is-static",attrs:{"icon-left":"percent"}})],1)],1),e("b-field",{staticClass:"column is-1"},[e("p",{staticClass:"control"},[e("b-button",{attrs:{type:"is-danger is-light",expanded:"","icon-left":"minus"},on:{click:function(e){return t.removeRow(a.id)}}})],1)])],1)})),e("div",{staticClass:"columns"},[e("b-field",{staticClass:"column is-1 is-offset-11"},[e("p",{staticClass:"control"},[e("b-button",{attrs:{type:"is-success is-light",expanded:"","icon-left":"plus"},on:{click:t.addCustomRow}})],1)])],1)],2):t._e(),e("div",{staticClass:"columns"},[e("b-field",{staticClass:"column is-4 is-offset-3",attrs:{type:"current"===t.finalRateSource?"is-warning":"is-success",label:("current"===t.finalRateSource?"Current":"Calculated")+" Rate"}},[e("b-input",t._b({attrs:{type:"number",size:"is-large",step:"0.000000000000001"},model:{value:t.finalRate,callback:function(e){t.finalRate=e},expression:"finalRate"}},"b-input",{readonly:!0},!1))],1)],1)]),e("footer",{staticClass:"modal-card-foot"},[e("b-button",{attrs:{"icon-left":"check",label:"Apply Rate",type:"is-primary"},on:{click:function(e){return t.$emit("submit",{finalRate:t.finalRate,adaAmount:t.adaAmount,usdAmount:t.usdAmount,lastTouchedAmount:t.lastTouchedAmount})}}}),e("b-button",{attrs:{label:"Cancel"},on:{click:function(e){return t.$emit("close")}}})],1)])},L=[function(){var t=this,e=t._self._c;return e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v("Rate calculator")])])}];const E=t=>t.id;function N(t,e){return Object.freeze(t.filter(t=>t.amountIn>0&&t.tokenCode===e).map(t=>({id:t.id,date:t.date.getTime?t.date:new Date(t.date),rate:t.rate,amount:t.amountIn})).sort((t,e)=>e.date.getTime()-t.date.getTime()))}var M={props:["initialTransfers","currentRate","currentTokenCode","initialAdaAmount","initialUsdAmount","initialLastTouchedAmount"],data(){return{transfers:[],transfersSelected:[],transfersCustom:[],finalRate:this.currentRate,finalRateSource:"current",adaAmount:this.initialAdaAmount,usdAmount:this.initialUsdAmount,lastTouchedAmount:this.initialLastTouchedAmount,lastTouchedField:null,rows:[],rowsLastTouchedAmount:{},columnDate:[],columnRate:[],columnAdaAmount:[],columnUsdAmount:[],columnPercent:[],columnPercentEdited:[],columnPercentLocked:[]}},computed:{columns(){return[this.columnRate,this.columnAdaAmount,this.columnUsdAmount,this.columnPercent]},totalAmount(){return this.columnAdaAmount.reduce((t,e)=>t+ +e,0)},columnPercentSum(){return this.columnPercent.reduce((t,e)=>t+parseFloat(e),0)}},watch:{adaAmount(){this.columnPercent=[...this.columnPercent]},usdAmount(){this.columnPercent=[...this.columnPercent]},transfersSelected(t,e){const s=[...t.map(t=>({id:t,isCustom:!1})),...this.rows.filter(({isCustom:t})=>t)];if(this.rows=s,t.length<e.length)this.$nextTick(this.distributePercentRemainders);else if(t.length>e.length){const s=t.filter(t=>!e.includes(t));for(const e of s){const s=t.indexOf(e);this.columnPercent.splice(s,0,"")}}},transfersCustom(t){this.rows=[...this.rows.filter(({isCustom:t})=>!t),...t.map(t=>({id:t,isCustom:!0}))]},rows(t,e){const s=t.map(E),a=e.map(E),n=[...this.columnDate],o=[...this.columnRate],i=[...this.columnAdaAmount],r=[...this.columnUsdAmount];let l=0;for(const[u,{id:d,isCustom:m}]of t.entries())if(!a.includes(d)){if(m)n.splice(u+l,0,new Date),o.splice(u+l,0,this.currentRate.toString().slice(0,17)),i.splice(u+l,0,""),r.splice(u+l,0,"");else{const t=this.transfers.find(t=>t.id===d);n.splice(u+l,0,t.date),o.splice(u+l,0,t.rate.toString()),i.splice(u+l,0,t.amount.toString()),r.splice(u+l,0,(t.amount*t.rate).toFixed(2))}l+=1}let c=0;for(const[u,{id:d}]of e.entries())s.includes(d)||(n.splice(u+c,1),o.splice(u+c,1),i.splice(u+c,1),r.splice(u+c,1),c-=1);this.columnDate=n,this.columnRate=o,this.columnAdaAmount=i,this.columnUsdAmount=r,this.rowsLastTouchedAmount=Object.fromEntries(t.map(({id:t})=>[t,this.rowsLastTouchedAmount[t]||"ada"]))},columnRate(t){if(this.lastTouchedField&&"rate"===this.lastTouchedField.columnName){const e=this.lastTouchedField.id,s=this.rows.findIndex(({id:t})=>t===e),a=+t[s],n=this.rowsLastTouchedAmount[e]||"ada";if("ada"===n){const t=[...this.columnUsdAmount],e=+this.columnAdaAmount[s]*a;t[s]=e?e.toFixed(2):"",this.columnUsdAmount=t}else{const t=[...this.columnAdaAmount],e=+this.columnUsdAmount[s]/a;t[s]=e?e.toFixed(2):"",this.columnAdaAmount=t}}},columnAdaAmount(t){if(this.lastTouchedField&&"adaAmount"===this.lastTouchedField.columnName){const e=[...this.columnUsdAmount],s=this.lastTouchedField.id,a=this.rows.findIndex(({id:t})=>t===s),n=+this.columnRate[a],o=+t[a]*n;if(e[a]=o?o.toFixed(2):"",this.columnUsdAmount=e,this.adaAmount)if(t.length>1){const e=parseFloat(this.adaAmount),s=t.map(t=>Math.round(100/e*parseFloat(t)).toString()),a=s.slice(0,-1).reduce((t,e)=>t+parseFloat(e),0);s[s.length-1]=(100-a).toString(),this.columnPercent=s}else 1===t.length?this.columnPercent=["100"]:this.columnPercent=[]}},columnUsdAmount(t){if(this.lastTouchedField&&"usdAmount"===this.lastTouchedField.columnName){const e=[...this.columnAdaAmount],s=this.lastTouchedField.id,a=this.rows.findIndex(({id:t})=>t===s),n=+this.columnRate[a],o=+t[a]/n;if(e[a]=o?o.toFixed(2):"",this.columnAdaAmount=e,this.usdAmount)if(t.length>1){const e=parseFloat(this.usdAmount),s=t.map(t=>Math.round(100/e*parseFloat(t)).toString()),a=s.slice(0,-1).reduce((t,e)=>t+parseFloat(e),0);s[s.length-1]=(100-a).toString(),this.columnPercent=s}else 1===t.length?this.columnPercent=["100"]:this.columnPercent=[]}},columnPercent(t){if(null===this.lastTouchedField||"percent"===this.lastTouchedField.columnName){if(this.adaAmount){const e=parseFloat(this.adaAmount),s=t.map(t=>(e/100*parseFloat(t)).toFixed(2));if(s.length>1){const t=s.slice(0,-1).reduce((t,e)=>t+parseFloat(e),0);s[s.length-1]=(e-t).toFixed(2)}this.columnAdaAmount=s}if(this.usdAmount){const e=parseFloat(this.usdAmount),s=t.map(t=>(e/100*parseFloat(t)).toFixed(2));if(s.length>1){const t=s.slice(0,-1).reduce((t,e)=>t+parseFloat(e),0);s[s.length-1]=(e-t).toFixed(2)}this.columnUsdAmount=s}}},columns(t){const[e,,,s]=t;if(100===s.reduce((t,e)=>t+parseFloat(e),0)){const t=Array.from(Array(e.length).keys()).reduce((t,a)=>t+e[a]*(s[a]/100),0);if(t)return this.finalRate=t.toString().slice(0,17),void(this.finalRateSource="splits")}this.finalRate=this.currentRate.toString().slice(0,17),this.finalRateSource="current"},finalRate(t){const e=parseFloat(t);if("ada"===this.lastTouchedAmount){const t=parseFloat(this.adaAmount);let s="";0===t?s=0:t&&(s=parseFloat((parseFloat(t)*e).toFixed(2))),this.usdAmount=s.toString()}else{const t=parseFloat(this.usdAmount);let s="";0===t?s=0:t&&(s=parseFloat((parseFloat(t)/e).toFixed(2))),this.adaAmount=s.toString()}}},methods:{adjustAmountFromAda(t){const e=this.finalRate||1,s=parseFloat(t.target.value);let a="";0===s?a=0:s&&(a=parseFloat((parseFloat(s)*e).toFixed(2))),this.usdAmount=a.toString(),this.lastTouchedAmount="ada"},adjustAmountFromUSD(t){const e=this.finalRate||1,s=parseFloat(t.target.value);let a="";0===s?a=0:s&&(a=parseFloat((parseFloat(s)/e).toFixed(2))),this.adaAmount=a.toString(),this.lastTouchedAmount="usd"},setLastTouchedField({id:t},e){this.lastTouchedField={id:t,columnName:e},e.includes("Amount")&&(this.rowsLastTouchedAmount[t]=e.split("Amount")[0])},distributePercentRemainders(t=!1){const e=t?this.lastTouchedField.id:null,s=[...this.columnPercentEdited];s.length===this.rows.length&&s.shift()===e&&s.shift(),e&&!s.includes(e)&&s.push(e);const a=this.rows.filter(({id:t})=>s.includes(t)).map(({id:t})=>t),n=this.rows.filter(({id:t})=>!s.includes(t)).map(({id:t})=>t),o=a.map(t=>this.rows.findIndex(({id:e})=>e===t)),i=n.map(t=>this.rows.findIndex(({id:e})=>e===t)),r=o.reduce((t,e)=>t+parseFloat(this.columnPercent[e]||0),0),l=100-r,c=Math.round(l/n.length),u=this.rows.map(t=>{if(n.includes(t.id))return c}),d=u.reduce((t,e)=>t+(e||0),0),m=r+d;m>100?u[i[i.length-1]]-=m-100:m<100&&(u[i[i.length-1]]+=100-m);const h=this.rows.map((t,e)=>void 0===u[e]?this.columnPercent[e]:u[e]>0?u[e].toString():"0");this.columnPercent=h,this.columnPercentEdited=s},addCustomRow(){this.transfersCustom.push(Date.now().toString())},removeRow(t){this.transfersSelected.includes(t)?this.transfersSelected.splice(this.transfersSelected.indexOf(t),1):this.transfersCustom.splice(this.transfersCustom.indexOf(t),1),this.columnPercentEdited=this.columnPercentEdited.filter(e=>t!==e),this.columnPercentLocked=this.columnPercentLocked.filter(e=>t!==e),this.$nextTick(this.distributePercentRemainders)}},mounted(){const t=N(this.initialTransfers,this.currentTokenCode),e=t.slice(0,5).map(E);this.transfers=t,this.transfersSelected=e,this.$nextTick(()=>{this.columnPercent=t.map(()=>Math.round(100/this.transfers.length).toString()),this.$nextTick(this.distributePercentRemainders)})}},z=M,B=Object(h["a"])(z,I,L,!1,null,null,null),q=B.exports;const J=t=>e=>e.id===t,H=t=>e=>e.id!==t,W=t=>!!t.amountIn,V=t=>!!t.amountOut,$=(t,{amountIn:e,amountOut:s})=>t+(e||s),Q={aada:"aada",agix:"agix",ada:"cardano",charli3:"charli3",clap:"clap",cneta:"cneta",copi:"copi",dana:"ardana",emp:"emp",gero:"gerowallet",hosky:"hosky",iagon:"iagon",lq:"lq",meld:"meld",milk:"mild",min:"min",mint:"mint",nftm:"nft-maker",nitroex:"nitroex",pavia:"pavia",sundae:"sundae",vyfi:"vyfi",wmtoken:"world-mobile-token",yummi:"yummi"},K={aada:"aada",agix:"agix",cardano:"ada",charli3:"charli3",clap:"clap",cneta:"cneta",copi:"copi",ardana:"dana",emp:"emp",gerowallet:"gero",hosky:"hosky",iagon:"iagon",lq:"lq",meld:"meld",milk:"mild",min:"min",mint:"mint","nft-maker":"nftm",nitroex:"nitroex",pavia:"pavia",sundae:"sundae",vyfi:"vyfi","world-mobile-token":"wmtoken",yummi:"yummi"};function G(t){let e=0,s=0;return t.sort((t,e)=>t.date-e.date).map(t=>({...t,rate:parseFloat(t.rate.toFixed(15)),balance:t.amountIn?e+=t.amountIn:e-=t.amountOut,balanceUsd:(t.amountIn?s+=t.amountIn*parseFloat(t.rate):s-=t.amountOut*parseFloat(t.rate)).toFixed(2),date:new Date(t.date)}))}function X(t){const e=t.map(t=>t.labels.map(({title:t})=>t));return e.reduce((t,e)=>(e.forEach(e=>{t.includes(e)||t.push(e)}),t),[])}function Z(t){const e=t[0],s=e.slice(7).map(t=>t.split("label_")[1]);return t.slice(1).map(t=>{const e=[];return t.slice(7).map((t,a)=>{t&&e.push({title:s[a],value:t})}),{id:t[0],date:new Date(t[1]),amountIn:parseFloat(t[2]),amountOut:parseFloat(t[3]),tokenCode:t[4],balance:parseFloat(t[5]),rate:parseFloat(t[6]),labels:e}})}function Y(t={},e={}){const s=e.tokenCode||"",a=e.rate||t[s]||1,n=e.amountIn||e.amountOut||null,o=n?Math.round(n*a*100)/100:n,i=e.labels?Object.fromEntries(e.labels.map(({title:t,value:e})=>[t,e])):{};return{id:e.id||null,date:e.date?new Date(e.date):new Date,amount:n,amountUSD:o,rate:a,tokenCode:s,labels:i}}function tt(t,e,s){const a=e.map(e=>({title:e,value:t.labels[e]||""}));return{...t,id:t.id||Date.now().toString(),date:t.date.getTime?t.date.getTime():t.date,amountIn:"in"===s?parseFloat(t.amount||t.amountIn):0,amountOut:"out"===s?parseFloat(t.amount||t.amountOut):0,rate:parseFloat(t.rate),labels:a}}function et(t,e){return t.map(t=>{const s={};e.forEach(e=>{const a=t.labels.find(t=>t.title===e);s["label_"+e]=a?a.value:""});const a="number"===typeof t.date?new Date(t.date):t.date;return{id:t.id,date:`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()}`,amountIn:t.amountIn,amountOut:t.amountOut,tokenCode:t.tokenCode,balance:t.balance,rate:t.rate,...s}})}var st={components:{PreferencesModal:U,RateModal:q},data(){return{projectName:"",isProjectLoaded:!1,transfers:[],currentRate:null,currentRates:{ada:null},lastTouchedAmount:"ada",isFormVisible:!1,isPreferencesModalActive:!1,isRateModalActive:!1,isProjectNameEditing:!1,formData:Y(),formLabels:[],labelTitles:[],defaultLabelTitle:"",enabledTokensCodes:["ada"],coinGeckoAPI:Object.freeze(new F.a)}},computed:{...Object(c["b"])("user",["isPaidAccount","savedTransfersPaid","savedTransfersFree"]),isFormUpdate(){return this.isFormVisible&&!!this.formData.id},adaReceived(){return this.transfers.filter(W).reduce($,0)},adaSent(){return this.transfers.filter(V).reduce($,0)},adaAvailable(){return this.adaReceived-this.adaSent},usdReceived(){return this.transfers.filter(W).reduce((t,{amountIn:e,amountOut:s,rate:a})=>t+(e||s)*a,0)},usdSent(){return this.transfers.filter(V).reduce((t,{amountIn:e,amountOut:s,rate:a})=>t+(e||s)*a,0)},usdAvailable(){return this.usdReceived-this.usdSent},isMultipleTokensEnabled(){return this.isPaidAccount},multiTokenUI(){return this.isPaidAccount&&(!this.transfersTokensCodesSet.has("ada")||this.transfersTokensCodesSet.size>1)},transfersTokensCodesSet(){return new Set(this.transfers.map(t=>t.tokenCode||"ada"))},geckoApiTokensIds(){return Object.fromEntries(this.enabledTokensCodes.map(t=>[t,Q[t]]))},tokensOverview(){return this.enabledTokensCodes.map(t=>{const e=this.transfers.filter(e=>!!e.amountIn&&e.tokenCode===t).reduce($,0),s=this.transfers.filter(e=>!!e.amountOut&&e.tokenCode===t).reduce($,0),a=e-s;return{code:t,received:e,sent:s,available:a}})},toExport(){return et(this.transfers,this.labelTitles)}},methods:{loadFromStore(){try{const t=JSON.parse(this.isPaidAccount?this.savedTransfersPaid:this.savedTransfersFree);return this.projectName=t.projectName,t.transfers&&t.transfers.length?(this.labelTitles=X(t.transfers),this.transfers=t.transfers,this.enabledTokensCodes=Array.from(this.transfersTokensCodesSet)):(this.labelTitles=["Label"],this.transfers=[],this.enabledTokensCodes=["ada"]),this.formLabels=this.labelTitles,this.defaultLabelTitle=this.labelTitles[0]||null,this.isFormVisible=!1,this.isProjectNameEditing=!1,this.formData=Y(this.currentRates,{tokenCode:this.enabledTokensCodes[0]||""}),this.isProjectLoaded=!0,!0}catch{}return!1},loadFromAPI(){P.project().then(t=>{this.projectName=t.data.name,this.labelTitles=X(t.data.transfers),this.formLabels=this.labelTitles,this.defaultLabelTitle=this.labelTitles[0],this.isFormVisible=!1,this.isProjectNameEditing=!1,this.transfers=G(t.data.transfers),this.enabledTokensCodes=Array.from(this.transfersTokensCodesSet),this.isProjectLoaded=!0})},loadFromFile(t){const e=t.target.files&&t.target.files[0];if(e){const t=e.name.split(/.csv$/)[0];C.a.parse(e,{error:t=>{this.$buefy.toast.open({message:`Error parsing the file: "${t}"`,type:"is-danger",duration:3e3})},complete:({data:e})=>{const s=Z(e);new Set(s.map(t=>t.tokenCode||"ada")).size>1&&!this.isPaidAccount?alert("Multitoken projects available only in paid account"):(this.projectName=t,this.transfers=s,this.enabledTokensCodes=Array.from(this.transfersTokensCodesSet),this.labelTitles=X(s),this.formLabels=this.labelTitles,this.defaultLabelTitle=this.labelTitles[0],this.isFormVisible=!1,this.isProjectNameEditing=!1,this.isProjectLoaded=!0,this.adjustBalance())}})}this.$refs.fileInput.value=null},loadCurrentRate(){this.currentRate=null,this.currentRates={ada:null},this.coinGeckoAPI.simple.price({ids:Object.values(this.geckoApiTokensIds),vs_currencies:["usd"]}).then(t=>{t.success&&(this.currentRates=Object.fromEntries(Object.keys(t.data).map(e=>[K[e],parseFloat(t.data[e].usd.toFixed(15))])),!this.isFormVisible&&Object.keys(t.data).length&&(this.formData.rate=this.currentRates.ada||this.currentRates[this.enabledTokensCodes[0]]))})},newProject(){this.projectName="New project",this.isProjectLoaded=!0,this.transfers=[],this.enabledTokensCodes=["ada"],this.isFormVisible=!1,this.isProjectNameEditing=!1,this.formData=Y(this.currentRates,{tokenCode:this.enabledTokensCodes[0]||""}),this.labelTitles=["Label"],this.defaultLabelTitle="Label",this.formLabels=[this.defaultLabelTitle],this.loadCurrentRate()},showPreferencesModal(){this.isProjectNameEditing=!1,this.isFormVisible=!1,this.isPreferencesModalActive=!0},hidePreferencesModal(){this.isPreferencesModalActive=!1},submitPreferencesForm({projectName:t,labelTitles:e,labelTitlesOrder:s,enabledTokensCodes:a}){this.projectName=t;const n=[],o=[],i=[],r={},l=s.filter(t=>!this.labelTitles.includes(t)),c=this.labelTitles.filter(t=>!s.includes(t));s.forEach(t=>{e[t]&&(o.push(e[t]),t!==e[t]&&(l.includes(t)||(i.push(t),r[t]=e[t])))});for(const u of this.transfers){const t=[];for(const e of u.labels)i.includes(e.title)?t.push({...e,title:r[e.title]}):c.includes(e.title)||t.push({...e});n.push({...u,labels:t})}this.labelTitles=o,this.enabledTokensCodes=Array.from(new Set(a,Array.from(this.transfersTokensCodesSet))),this.transfers=n,this.formLabels=[...this.labelTitles],this.defaultLabelTitle=this.formLabels[0],this.hidePreferencesModal()},showRateModal(){this.isRateModalActive=!0},hideRateModal(){this.isRateModalActive=!1},submitRateForm({finalRate:t,adaAmount:e,usdAmount:s,lastTouchedAmount:a}){this.lastTouchedAmount=a,this.formData.rate=t,this.formData.amount=e,this.formData.amountUSD=s,this.hideRateModal()},enableProjectNameEditing(){this.isProjectNameEditing=!0,this.$nextTick(()=>{this.$refs.projectNameInput.focus()})},disableProjectNameEditing(){this.isProjectNameEditing=!1},saveTransfersToStore(t){const e={projectName:this.projectName,transfers:t||this.transfers};this.isPaidAccount?this.$store.commit("user/setSavedTransfersPaid",JSON.stringify(e)):this.$store.commit("user/setSavedTransfersFree",JSON.stringify(e))},projectNameEnterButtonHandler(t){this.isProjectNameEditing&&13===t.keyCode&&this.disableProjectNameEditing()},transferAdd(t){this.transfers.push(tt(this.formData,this.formLabels,t))},transferEdit(){if(this.formData.id){const t=this.transfers.findIndex(J(this.formData.id)),e=this.transfers[t].amountIn?"in":"out";this.transfers.splice(t,1,tt(this.formData,this.formLabels,e))}},transferRemove(t){this.transfers=this.transfers.filter(H(t.id)),this.adjustBalance()},getLabelValue(t,e){let s;if(e){const s=e.find(e=>e.title===t);if(s)return s.value}else s=this.formData.labels[t];return s||""},adjustBalance(){let t=0,e=0;this.transfers=this.transfers.map(s=>({...s,balance:s.amountIn?t+=s.amountIn:t-=s.amountOut,balanceUsd:s.amountIn?e+=s.amountIn*s.rate:e-=s.amountOut*s.rate}))},transferToForm(t){this.formData=Y(this.currentRates,t),this.formLabels=[...this.labelTitles],this.showForm()},showForm(){this.isFormVisible=!0},hideForm(){this.isFormVisible=!1,this.resetForm()},resetForm(){this.formData=Y(this.currentRates,{tokenCode:this.enabledTokensCodes[0]||""}),this.formLabels=[...this.labelTitles]},adjustTransferAmountFromAda(t){const e=this.formData.rate||1,s=parseFloat(t.target.value);let a="";0===s?a=0:s&&(a=parseFloat((parseFloat(s)*e).toFixed(2))),this.formData.amountUSD=a.toString(),this.lastTouchedAmount="ada"},adjustTransferAmountFromUSD(t){const e=this.formData.rate||1,s=parseFloat(t.target.value);let a="";0===s?a=0:s&&(a=parseFloat((parseFloat(s)/e).toFixed(2))),this.formData.amount=a.toString(),this.lastTouchedAmount="usd"},adjustTransferAmountsFromRate(t){const e=t?parseFloat(t.target.value):parseFloat(this.formData.rate);if(e)if("ada"===this.lastTouchedAmount){const t=parseFloat(this.formData.amount);let s="";0===t?s=0:t&&(s=parseFloat((parseFloat(t)*e).toFixed(2))),this.formData.amountUSD=s.toString()}else{const t=parseFloat(this.formData.amountUSD);let s="";0===t?s=0:t&&(s=parseFloat((parseFloat(t)/e).toFixed(2))),this.formData.amount=s.toString()}},enterButtonHandler(t){this.isFormUpdate&&13===t.keyCode&&this.submitUpdate()},submitUpdate(){this.transferEdit(),this.hideForm(),this.adjustBalance()},submitAddSent(){this.formData.amount&&(this.transferAdd("out"),this.adjustBalance()),this.hideForm()},submitAddReceive(){this.formData.amount&&(this.transferAdd("in"),this.adjustBalance()),this.hideForm()},makePayment(){alert("Not implemented yet.")}},watch:{isPaidAccount(t){if(t)this.loadFromStore()||(this.transfers.length?this.saveTransfersToStore():this.newProject());else{const t=1===this.transfersTokensCodesSet.size&&this.transfersTokensCodesSet.has("ada");t?this.saveTransfersToStore():this.loadFromStore()||this.newProject(),this.enabledTokensCodes=["ada"]}},transfers(t){this.saveTransfersToStore(t)},projectName(){this.saveTransfersToStore()},geckoApiTokensIds(t){Object.keys(t).length&&this.loadCurrentRate()},"formData.tokenCode":{handler:function(t,e){this.isFormVisible&&t!==e&&(this.formData.rate=this.currentRates[t],this.adjustTransferAmountsFromRate())}}},mounted(){this.loadFromStore()||this.newProject(),Object.keys(this.geckoApiTokensIds).length&&this.loadCurrentRate()}},at=st,nt=(s("dda2"),Object(h["a"])(at,k,T,!1,null,"895df9d6",null)),ot=nt.exports,it={components:{Project:ot},data(){return{}},methods:{},computed:{},mounted(){if(window.localStorage){let t=["dispersal-tool-f5-default"];t.forEach(t=>{let e=window.localStorage.getItem(t);e&&window.localStorage.removeItem(t)})}}},rt=it,lt=Object(h["a"])(rt,A,v,!1,null,null,null),ct=lt.exports;a["a"].use(b["a"]);const ut=[{path:"/",name:"Home",component:ct}],dt=new b["a"]({base:"/",routes:ut,scrollBehavior(t,e,s){return new Promise(e=>{s?setTimeout(()=>{e(s)},500):t.hash?setTimeout(()=>{const s=document.getElementById(t.hash.substring("#".length));s.scrollIntoView({behavior:"smooth"}),e(!0)},500):e({x:0,y:0})})}});var mt=dt,ht=s("a768"),ft=s.n(ht);const pt=()=>({locale:"en",isPaidAccount:!1,savedTransfersPaid:{},savedTransfersFree:{}}),bt=pt(),At={locale:t=>t.locale,isPaidAccount:t=>t.isPaidAccount,savedTransfersPaid:t=>t.savedTransfersPaid,savedTransfersFree:t=>t.savedTransfersFree},vt={},kt={setLocale(t,e){t.locale=e},setPaidAccount(t){t.isPaidAccount=!0},setFreeAccount(t){t.isPaidAccount=!1},setSavedTransfersPaid(t,e){t.savedTransfersPaid=e},setSavedTransfersFree(t,e){t.savedTransfersFree=e}};var Tt={namespaced:!0,state:bt,getters:At,actions:vt,mutations:kt};a["a"].use(c["a"]);const gt=!1;let Ct=ft()({namespace:"dispersal-tool-f8",initialState:{},expires:5184e6});var yt=new c["a"].Store({modules:{user:Tt},strict:gt,plugins:[Ct]}),Ft=s("a925");function St(t={}){const e={countryCodeOnly:!1},s={...e,...t},a=void 0!==navigator.languages?navigator.languages[0]:navigator.language;if(!a)return;const n=s.countryCodeOnly?a.trim().split(/-|_/)[0]:a.trim();return n}var wt={general:{MI_DISPERSAL:"Dispersal"},home:{TOOL_TITLE:"AIM Dispersal tool"}},Pt={},jt={},Dt={},Rt={},_t={},Ot={},xt={},Ut={en:wt,ja:Pt,it:jt,es:Dt,fr:Rt,pt:_t,ru:Ot,zh:xt},It={currency:{style:"currency",currency:"USD"}},Lt={currency:{style:"currency",currency:"USD"}},Et={currency:{style:"currency",currency:"USD"}},Nt={en:It,ja:Lt,it:Et},Mt={short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric",hour12:!0}},zt={en:Mt};function Bt(){const t=St({countryCodeOnly:!0});return Object.keys(u).includes(t)?t:"en"}a["a"].use(Ft["a"]);let qt=Bt();const Jt=new Ft["a"]({locale:qt,messages:Ut,numberFormats:Nt,dateTimeFormats:zt});var Ht=s("130e"),Wt=s("049c"),Vt=s.n(Wt);a["a"].use(Ht["a"],w.a),a["a"].use(Vt.a),a["a"].axios.defaults.baseURL="/dispersal-tool/";s("5abe"),s("9299");a["a"].use(n["a"]),a["a"].config.productionTip=!1,a["a"].component("downloadCsv",i.a),a["a"].use(n["a"]),new a["a"]({router:mt,i18n:Jt,store:yt,render:t=>t(p)}).$mount("#app"),a["a"].config.productionTip=!1},"735d":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABoCAMAAAAqwkWTAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAvFQTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////rkHhmgAAAPt0Uk5TAAUZLT1QZHAOaFWHsdr4/1caA6QgAjuT1/w8I4vl540lbh+I84n7GHHe33IBDwph0v5iBm3w8SfCKEXv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"},"8a6f":function(t,e,s){"use strict";s("21ca")},9299:function(t,e,s){},a1b6:function(t,e,s){},dda2:function(t,e,s){"use strict";s("a1b6")}});
//# sourceMappingURL=app.d1df2caf.js.map